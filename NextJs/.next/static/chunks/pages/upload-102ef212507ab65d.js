(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{9182:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return n(4283)}])},4283:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var l=n(1527),s=n(959),r=n(6433),i=n(4949),a=n(695),c=n(9168);function o(){let e=(0,s.useRef)(null),[t,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(0),u=async e=>{let t=await (await (0,r.j)().use(i.Z).use(a.Z).process(e)).toString();return t},m=e=>{let t=e.target.files;if(!t)return;let l=[];for(let s=0;s<t.length;s++){let r=t[s],i=r.name.split(".").pop();if("md"!==i&&"markdown"!==i)continue;let a=new FileReader;a.onloadend=async()=>{l.push({file:r,preview:a.result,htmlPreview:await u(a.result),id:(0,c.Z)()}),n(l),console.log(l)},a.readAsText(r)}},f=t=>{t.preventDefault();let n=t.dataTransfer.files;if(!n)return;e.current.files=n;let l={target:e.current};m(l)},h=e=>{let l=[...t];l.splice(e,1),n(l),o>l.length-1&&0!==o&&d(o-1)},p=async e=>{let n=t[e].preview;h(e),await fetch("http://localhost:5000/",{method:"POST",body:n})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsxs)("div",{className:"cursor-pointer bg-zinc-900 text-white hover:text-[#0070f3] transition-all font-semibold text-4xl p-4 rounded-md aspect-square flex justify-center items-center w-[min(60vw,60vh)] max-w-[min(min(60vw,60vh),32rem)] border-white hover:border-[#0070f3] border-2",onDrop:f,onDragOver:e=>e.preventDefault(),onClick:()=>e.current.click(),children:[(0,l.jsx)("input",{className:"sr-only",type:"file",ref:e,multiple:!0,onChange:m}),(0,l.jsx)("p",{children:"Upload Markdown"})]})}),t.length>0&&(0,l.jsx)("div",{className:"absolute top-0 left-0 w-screen h-screen flex justify-center items-center",children:(0,l.jsxs)("div",{className:"bg-zinc-900 w-4/5 rounded-lg max-w-4xl max-h-4xl h-4/5 grid grid-rows-[min-content,auto,min-content]",children:[(0,l.jsx)("div",{className:"bg-black/50 p-4 rounded-t-lg",children:(0,l.jsx)("h1",{className:"font-semibold text-xl",children:t[o].file.name})}),(0,l.jsx)("p",{className:"md m-4 overflow-scroll",dangerouslySetInnerHTML:{__html:t[o].htmlPreview}}),(0,l.jsxs)("div",{className:"p-4 bg-black/25 flex justify-between",children:[(0,l.jsx)("ul",{className:"gap-2 flex",children:t.map((e,t)=>(0,l.jsx)("li",{children:(0,l.jsx)("button",{className:"bg-".concat(t==o?"[#0070f3]":"black"," p-1 px-2 rounded-md"),onClick:()=>d(t),children:t+1})},e.id))}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"bg-[#0070f3] p-1 px-2 rounded-md",onClick:()=>p(o),children:"Upload"}),(0,l.jsx)("button",{className:"p-1 px-2 rounded-md",onClick:()=>h(o),children:"Cancel"})]})]})]})})]})}}},function(e){e.O(0,[974,774,888,179],function(){return e(e.s=9182)}),_N_E=e.O()}]);